---
title: "Docker"
categories:
  - SD
tags:
  - Microservice
last_modified_at: 2016-02-02T12:00:00-01:00
---

**[Docker](https://www.docker.com/){:target="_blank"}** ([Github](https://github.com/docker){:target="_blank"}, [Docs](https://docs.docker.com/get-started/overview/){:target="_blank"}) is an open platform for developing, shipping, and running applications.

TOC

- [Cheat Sheet](#cheat-sheet)
  - [Prerequisites](#prerequisites)
    - [Linux](#linux)
    - [MacOS](#macos)
  - [Installation](#installation)
    - [Linux](#linux-1)
    - [macOS](#macos-1)
    - [Check Version](#check-version)
  - [Containers](#containers)
    - [Lifecycle](#lifecycle)
    - [Starting and Stopping](#starting-and-stopping)
      - [CPU Constraints](#cpu-constraints)
      - [Memory Constraints](#memory-constraints)
      - [Capabilities](#capabilities)
    - [Info](#info)
    - [Import / Export](#import--export)
    - [Executing Commands](#executing-commands)
  - [Images](#images)
    - [Lifecycle](#lifecycle-1)
    - [Info](#info-1)
    - [Cleaning up](#cleaning-up)
    - [Load/Save image](#loadsave-image)
    - [Import/Export container](#importexport-container)
    - [Difference between loading a saved image and importing an exported container as an image](#difference-between-loading-a-saved-image-and-importing-an-exported-container-as-an-image)
  - [Networks](#networks)
    - [Lifecycle](#lifecycle-2)
    - [Info](#info-2)
    - [Connection](#connection)
  - [Registry & Repository](#registry--repository)
    - [Run local registry](#run-local-registry)
  - [Dockerfile](#dockerfile)
    - [Instructions](#instructions)
    - [Tutorial](#tutorial)
    - [Examples](#examples)
  - [Layers](#layers)
  - [Links](#links)
  - [Volumes](#volumes)
    - [Lifecycle](#lifecycle-3)
    - [Info](#info-3)
  - [Exposing ports](#exposing-ports)
  - [Best Practices](#best-practices)
  - [Docker-Compose](#docker-compose)
  - [Security](#security)
    - [Security Tips](#security-tips)
    - [User Namespaces](#user-namespaces)
    - [Security Videos](#security-videos)
    - [Security Roadmap](#security-roadmap)
  - [Tips](#tips)
    - [Prune](#prune)
    - [df](#df)
    - [Heredoc Docker Container](#heredoc-docker-container)
    - [Last Ids](#last-ids)
    - [Commit with command (needs Dockerfile)](#commit-with-command-needs-dockerfile)
    - [Get IP address](#get-ip-address)
    - [Get port mapping](#get-port-mapping)
    - [Find containers by regular expression](#find-containers-by-regular-expression)
    - [Get Environment Settings](#get-environment-settings)
    - [Kill running containers](#kill-running-containers)
    - [Delete all containers (force!! running or stopped containers)](#delete-all-containers-force-running-or-stopped-containers)
    - [Delete old containers](#delete-old-containers)
    - [Delete stopped containers](#delete-stopped-containers)
    - [Delete containers after stopping](#delete-containers-after-stopping)
    - [Delete dangling images](#delete-dangling-images)
    - [Delete all images](#delete-all-images)
    - [Delete dangling volumes](#delete-dangling-volumes)
    - [Show image dependencies](#show-image-dependencies)
    - [Slimming down Docker containers](#slimming-down-docker-containers)
    - [Monitor system resource utilization for running containers](#monitor-system-resource-utilization-for-running-containers)
    - [Volumes can be files](#volumes-can-be-files)
- [Examples](#examples-1)


## Cheat Sheet

### Prerequisites

I use [Oh My Zsh](https://github.com/robbyrussell/oh-my-zsh) with the [Docker plugin](https://github.com/robbyrussell/oh-my-zsh/wiki/Plugins#docker) for autocompletion of docker commands. YMMV.

#### Linux

The 3.10.x kernel is [the minimum requirement](https://docs.docker.com/engine/installation/binaries/#check-kernel-dependencies) for Docker.

#### MacOS

10.8 “Mountain Lion” or newer is required.

### Installation

#### Linux

Quick and easy install script provided by Docker:

```shell
curl -sSL https://get.docker.com/ | sh
```

If you're not willing to run a random shell script, please see the [installation](https://docs.docker.com/engine/installation/linux/) instructions for your distribution.

If you are a complete Docker newbie, you should follow the [series of tutorials](https://docs.docker.com/engine/getstarted/) now.

#### macOS

Download and install [Docker Community Edition](https://www.docker.com/community-edition). if you have Homebrew-Cask, just type `brew cask install docker`. Or Download and install [Docker Toolbox](https://docs.docker.com/toolbox/overview/).  [Docker For Mac](https://docs.docker.com/docker-for-mac/) is nice, but it's not quite as finished as the VirtualBox install.  [See the comparison](https://docs.docker.com/docker-for-mac/docker-toolbox/).

> **NOTE** Docker Toolbox is legacy. You should to use Docker Community Edition, See [Docker Toolbox](https://docs.docker.com/toolbox/overview/).

Once you've installed Docker Community Edition, click the docker icon in Launchpad. Then start up a container:

```shell
docker run hello-world
```

That's it, you have a running Docker container.

If you are a complete Docker newbie, you should probably follow the [series of tutorials](https://docs.docker.com/engine/getstarted/) now.

#### Check Version

It is very important that you always know the current version of Docker you are currently running on at any point in time. This is very helpful because you get to know what features are compatible with what you have running. This is also important because you know what containers to run from the docker store when you are trying to get template containers. That said let see how to know which version of docker we have running currently.

* [`docker version`](https://docs.docker.com/engine/reference/commandline/version/) shows which version of docker you have running.

Get the server version:

```shell
$ docker version --format '{{.Server.Version}}'

1.8.0
```

You can also dump raw JSON data:

```shell
$ docker version --format '{{json .}}'

{"Client":{"Version":"1.8.0","ApiVersion":"1.20","GitCommit":"f5bae0a","GoVersion":"go1.4.2","Os":"linux","Arch":"am"}
```

